/*
Copyright (c) 2022 Rune AI Inc.
All rights reserved.

This code is proprietary to Rune AI Inc.
The code may be used solely for accessing the Service provided by Rune AI Inc. following the Rune Terms of Service ("Terms") accessible at rune.ai/eula. You may not use this code for any use or purpose other than as expressly permitted by the Terms.
Restrictions set forth in the Terms include, but is not limited to, that you may not copy, adapt, modify, prepare derivative works based upon, distribute, license, sell, transfer, publicly display, publicly perform, transmit, stream, broadcast, attempt to discover any source code, reverse engineer, decompile, dissemble, or otherwise exploit the code as a whole or any portion of the code.
*/
var Rune=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function r(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function f(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function l(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var d={enabled:!1},h=new Map,p=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"muted");var v=new Set;function y(e){var t,n;h.set(e,null===(t=null==p?void 0:p.get)||void 0===t?void 0:t.call(e)),null===(n=null==p?void 0:p.set)||void 0===n||n.call(e,d.enabled),v.add(e)}function g(){new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){e instanceof HTMLAudioElement&&y(e)})),e.removedNodes.forEach((function(e){var t;e instanceof HTMLAudioElement&&(t=e,h.delete(t),v.delete(t))}))}))})).observe(document,{childList:!0,subtree:!0})}var m=document.createElement;var w=window.Audio;var b=new Set;function _(e){e.gain.value=d.enabled?0:1,b.add(e)}var S=Object.getOwnPropertyDescriptor(AudioNode.prototype,"connect");function U(e){d.enabled=e,function(){var e,t;try{for(var n=c(Array.from(document.getElementsByTagName("audio"))),r=n.next();!r.done;r=n.next())y(r.value)}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}(),g(),document.createElement=function(e,t){var n=m.call(this,e,t);return n instanceof HTMLAudioElement&&y(n),n},window.Audio=function(e){var t=new w(e);return y(t),t},window.Audio.prototype=w.prototype,Object.defineProperty(HTMLMediaElement.prototype,"muted",{get:function(){var e;return null!==(e=h.get(this))&&void 0!==e&&e},set:function(e){var t;h.set(this,e),d.enabled||null===(t=null==p?void 0:p.set)||void 0===t||t.call(this,e)}}),Object.defineProperty(AudioNode.prototype,"connect",s(s({},S),{value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0];if(n instanceof AudioDestinationNode){var r=n.context.createGain();return null==S||S.value.call(this,r),null==S||S.value.apply(r,e),_(r),n}return null==S?void 0:S.value.apply(this,e)}}))}function E(){var e=new URLSearchParams(window.location.search);return{enableInitialOverlayInBrowser:!!e.get("enableInitialOverlayInBrowser"),useDocumentForPostMsgs:!!e.get("customPostMessages"),challengeNumber:Number(e.get("challengeNumber"))||1,startMuted:!!e.get("startMuted")}}var x=Symbol.for("immer-nothing"),A=Symbol.for("immer-draftable"),I=Symbol.for("immer-state");function O(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var C=Object.getPrototypeOf;function T(e){return!!e&&!!e[I]}function M(e){var t;return!!e&&(P(e)||Array.isArray(e)||!!e[A]||!(null===(t=e.constructor)||void 0===t||!t[A])||j(e)||z(e))}var R=Object.prototype.constructor.toString();function P(e){if(!e||"object"!==t(e))return!1;var n=C(e);if(null===n)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===R}function L(e,t){0===D(e)?Object.entries(e).forEach((function(n){var r=i(n,2),o=r[0],a=r[1];t(o,a,e)})):e.forEach((function(n,r){return t(r,n,e)}))}function D(e){var t=e[I];return t?t.type_:Array.isArray(e)?1:j(e)?2:z(e)?3:0}function B(e,t){return 2===D(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function k(e,t,n){var r=D(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function j(e){return e instanceof Map}function z(e){return e instanceof Set}function G(e){return e.copy_||e.base_}function N(t,n){if(j(t))return new Map(t);if(z(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!n&&P(t)){if(!C(t)){var i=Object.create(null);return Object.assign(i,t)}return function(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t)}var o=Object.getOwnPropertyDescriptors(t);delete o[I];for(var a=Reflect.ownKeys(o),s=0;s<a.length;s++){var c=a[s],u=o[c];!1===u.writable&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(o[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(C(t),o)}function F(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return K(e)||T(e)||!M(e)||(D(e)>1&&(e.set=e.add=e.clear=e.delete=W),Object.freeze(e),t&&L(e,(function(e,t){return F(t,!0)}))),e}function W(){O(2)}function K(e){return Object.isFrozen(e)}var H,V={};function q(e){var t=V[e];return t||O(0),t}function Y(){return H}function X(e,t){t&&(q("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Q(e){J(e),e.drafts_.forEach(Z),e.drafts_=null}function J(e){e===H&&(H=e.parent_)}function $(e){return H={drafts_:[],parent_:H,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Z(e){var t=e[I];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ee(e,t){t.unfinalizedDrafts_=t.drafts_.length;var n=t.drafts_[0];return void 0!==e&&e!==n?(n[I].modified_&&(Q(t),O(4)),M(e)&&(e=te(t,e),t.parent_||re(t,e)),t.patches_&&q("Patches").generateReplacementPatches_(n[I].base_,e,t.patches_,t.inversePatches_)):e=te(t,n,[]),Q(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==x?e:void 0}function te(e,t,n){if(K(t))return t;var r=t[I];if(!r)return L(t,(function(i,o){return ne(e,r,t,i,o,n)})),t;if(r.scope_!==e)return t;if(!r.modified_)return re(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;var i=r.copy_,o=i,a=!1;3===r.type_&&(o=new Set(i),i.clear(),a=!0),L(o,(function(t,o){return ne(e,r,i,t,o,n,a)})),re(e,i,!1),n&&e.patches_&&q("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ne(e,t,n,r,i,o,a){if(T(i)){var s=te(e,i,o&&t&&3!==t.type_&&!B(t.assigned_,r)?o.concat(r):void 0);if(k(n,r,s),!T(s))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(M(i)&&!K(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;te(e,i),t&&t.scope_.parent_||re(e,i)}}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&F(t,n)}var ie={get:function(e,t){if(t===I)return e;var n=G(e);if(!B(n,t))return function(e,t,n){var r,i=se(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);var r=n[t];return e.finalized_||!M(r)?r:r===ae(e.base_,t)?(ue(e),e.copy_[t]=le(r,e)):r},has:function(e,t){return t in G(e)},ownKeys:function(e){return Reflect.ownKeys(G(e))},set:function(e,t,n){var r,i,o=se(G(e),t);if(null!=o&&o.set)return o.set.call(e.draft_,n),!0;if(!e.modified_){var a=ae(G(e),t),s=null==a?void 0:a[I];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((r=n)===(i=a)?0!==r||1/r==1/i:r!=r&&i!=i)&&(void 0!==n||B(e.base_,t)))return!0;ue(e),ce(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ae(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ue(e),ce(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor:function(e,t){var n=G(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){O(11)},getPrototypeOf:function(e){return C(e.base_)},setPrototypeOf:function(){O(12)}},oe={};function ae(e,t){var n=e[I];return(n?G(n):e)[t]}function se(e,t){if(t in e)for(var n=C(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=C(n)}}function ce(e){e.modified_||(e.modified_=!0,e.parent_&&ce(e.parent_))}function ue(e){e.copy_||(e.copy_=N(e.base_,e.scope_.immer_.useStrictShallowCopy_))}L(ie,(function(e,t){oe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),oe.deleteProperty=function(e,t){return oe.set.call(this,e,t,void 0)},oe.set=function(e,t,n){return ie.set.call(this,e[0],t,n,e[0])};var fe=function(){function e(n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var a=r;return function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return a.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(i))}))}}var s;if("function"!=typeof n&&O(6),void 0!==i&&"function"!=typeof i&&O(7),M(e)){var c=$(r),u=le(e,void 0),f=!0;try{s=n(u),f=!1}finally{f?Q(c):J(c)}return X(c,i),ee(s,c)}if(!e||"object"!==t(e)){if(void 0===(s=n(e))&&(s=e),s===x&&(s=void 0),r.autoFreeze_&&F(s,!0),i){var l=[],d=[];q("Patches").generateReplacementPatches_(e,s,l,d),i(l,d)}return s}O(1)},this.produceWithPatches=function(e,t){return"function"==typeof e?function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return r.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(i))}))}:[r.produce(e,t,(function(e,t){n=e,i=t})),n,i];var n,i},"boolean"==typeof(null==n?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),"boolean"==typeof(null==n?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}var r,i,o;return r=e,(i=[{key:"createDraft",value:function(e){var t;M(e)||O(8),T(e)&&(T(t=e)||O(10),e=de(t));var n=$(this),r=le(e,void 0);return r[I].isManual_=!0,J(n),r}},{key:"finishDraft",value:function(e,t){var n=e&&e[I];n&&n.isManual_||O(9);var r=n.scope_;return X(r,t),ee(void 0,r)}},{key:"setAutoFreeze",value:function(e){this.autoFreeze_=e}},{key:"setUseStrictShallowCopy",value:function(e){this.useStrictShallowCopy_=e}},{key:"applyPatches",value:function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=q("Patches").applyPatches_;return T(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))}}])&&n(r.prototype,i),o&&n(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function le(e,t){var n=j(e)?q("MapSet").proxyMap_(e,t):z(e)?q("MapSet").proxySet_(e,t):function(e,t){var n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Y(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=r,o=ie;n&&(i=[r],o=oe);var a=Proxy.revocable(i,o),s=a.revoke,c=a.proxy;return r.draft_=c,r.revoke_=s,c}(e,t);return(t?t.scope_:Y()).drafts_.push(n),n}function de(e){if(!M(e)||K(e))return e;var t,n=e[I];if(n){if(!n.modified_)return n.base_;n.finalized_=!0,t=N(e,n.scope_.immer_.useStrictShallowCopy_)}else t=N(e,!0);return L(t,(function(e,n){k(t,e,de(n))})),n&&(n.finalized_=!1),t}var he=new fe,pe=he.produce;he.produceWithPatches.bind(he),he.setAutoFreeze.bind(he),he.setUseStrictShallowCopy.bind(he),he.applyPatches.bind(he),he.createDraft.bind(he),he.finishDraft.bind(he);var ve,ye,ge,me=4294967295;function we(e,t,n){var r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function be(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var _e=("undefined"==typeof process||"never"!==(null===(ve=null===process||void 0===process?void 0:process.env)||void 0===ve?void 0:ve.TEXT_ENCODING))&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function Se(e){for(var t=e.length,n=0,r=0;r<t;){var i=e.charCodeAt(r++);if(0!=(4294967168&i))if(0==(4294965248&i))n+=2;else{if(i>=55296&&i<=56319&&r<t){var o=e.charCodeAt(r);56320==(64512&o)&&(++r,i=((1023&i)<<10)+(1023&o)+65536)}n+=0==(4294901760&i)?3:4}else n++}return n}var Ue=_e?new TextEncoder:void 0,Ee=_e?"undefined"!=typeof process&&"force"!==(null===(ye=null===process||void 0===process?void 0:process.env)||void 0===ye?void 0:ye.TEXT_ENCODING)?200:0:me;var xe=(null==Ue?void 0:Ue.encodeInto)?function(e,t,n){Ue.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(Ue.encode(e),n)};function Ae(e,t,n){for(var r=t,i=r+n,o=[],a="";r<i;){var s=e[r++];if(0==(128&s))o.push(s);else if(192==(224&s)){var c=63&e[r++];o.push((31&s)<<6|c)}else if(224==(240&s)){c=63&e[r++];var u=63&e[r++];o.push((31&s)<<12|c<<6|u)}else if(240==(248&s)){var f=(7&s)<<18|(c=63&e[r++])<<12|(u=63&e[r++])<<6|63&e[r++];f>65535&&(f-=65536,o.push(f>>>10&1023|55296),f=56320|1023&f),o.push(f)}else o.push(s);o.length>=4096&&(a+=String.fromCharCode.apply(String,o),o.length=0)}return o.length>0&&(a+=String.fromCharCode.apply(String,o)),a}var Ie=_e?new TextDecoder:null,Oe=_e?"undefined"!=typeof process&&"force"!==(null===(ge=null===process||void 0===process?void 0:process.env)||void 0===ge?void 0:ge.TEXT_DECODER)?200:0:me;var Ce,Te=function(e,t){this.type=e,this.data=t},Me=(Ce=function(e,t){return Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ce(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ce(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Re=function(e){function t(n){var r=e.call(this,n)||this,i=Object.create(t.prototype);return Object.setPrototypeOf(r,i),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return Me(t,e),t}(Error);var Pe={type:-1,encode:function(e){var t,n,r,i;return e instanceof Date?function(e){var t,n=e.sec,r=e.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var i=new Uint8Array(4);return(t=new DataView(i.buffer)).setUint32(0,n),i}var o=n/4294967296,a=4294967295&n;return i=new Uint8Array(8),(t=new DataView(i.buffer)).setUint32(0,r<<2|3&o),t.setUint32(4,a),i}return i=new Uint8Array(12),(t=new DataView(i.buffer)).setUint32(0,r),we(t,4,n),i}((t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),i=Math.floor(r/1e9),{sec:n+i,nsec:r-1e9*i})):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:be(t,4),nsec:t.getUint32(0)};default:throw new Re("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},Le=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Pe)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var i=1+t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){if(null!=(r=this.builtInEncoders[n]))if(null!=(i=r(e,t)))return new Te(-1-n,i)}for(n=0;n<this.encoders.length;n++){var r,i;if(null!=(r=this.encoders[n]))if(null!=(i=r(e,t)))return new Te(n,i)}return e instanceof Te?e:null},e.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new Te(t,e)},e.defaultCodec=new e,e}();function De(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var Be=function(){function e(e,t,n,r,i,o,a,s){void 0===e&&(e=Le.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=i,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=s,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null===e?this.encodeNil():void 0===e?this.encodeUndefined():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeUndefined=function(){this.writeU8(193)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>Ee){var t=Se(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),xe(e,this.bytes,this.pos),this.pos+=t}else{t=Se(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var r=e.length,i=n,o=0;o<r;){var a=e.charCodeAt(o++);if(0!=(4294967168&a)){if(0==(4294965248&a))t[i++]=a>>6&31|192;else{if(a>=55296&&a<=56319&&o<r){var s=e.charCodeAt(o);56320==(64512&s)&&(++o,a=((1023&a)<<10)+(1023&s)+65536)}0==(4294901760&a)?(t[i++]=a>>12&15|224,t[i++]=a>>6&63|128):(t[i++]=a>>18&7|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128)}t[i++]=63&a|128}else t[i++]=a}}(e,this.bytes,this.pos),this.pos+=t}},e.prototype.encodeObject=function(e,n){var r=this.extensionCodec.tryToEncode(e,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!==t(e))throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,n)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=De(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(var r=0,i=e;r<i.length;r++){var o=i[r];this.doEncode(o,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0,i=t;r<i.length;r++){void 0!==e[i[r]]&&n++}return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: ".concat(r));this.writeU8(223),this.writeU32(r)}for(var i=0,o=n;i<o.length;i++){var a=o[i],s=e[a];this.ignoreUndefined&&void 0===s||(this.encodeString(a),this.doEncode(s,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),we(this.view,this.pos,e),this.pos+=8},e}(),ke={};function je(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var ze=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){e:for(var r=0,i=this.caches[n-1];r<i.length;r++){for(var o=i[r],a=o.bytes,s=0;s<n;s++)if(a[s]!==e[t+s])continue e;return o.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var i=Ae(e,t,n),o=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(o,i),i},e}(),Ge=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ne=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Fe=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}},We=function(e){return this instanceof We?(this.v=e,this):new We(e)},Ke=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof We?Promise.resolve(n.value.v).then(c,u):f(o[0][2],n)}catch(e){f(o[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function f(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},He=new DataView(new ArrayBuffer(0)),Ve=new Uint8Array(He.buffer),qe=function(){try{He.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),Ye=new qe("Insufficient data"),Xe=new ze,Qe=function(){function e(e,t,n,r,i,o,a,s){void 0===e&&(e=Le.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=me),void 0===r&&(r=me),void 0===i&&(i=me),void 0===o&&(o=me),void 0===a&&(a=me),void 0===s&&(s=Xe),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=i,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=s,this.totalPos=0,this.pos=0,this.view=He,this.bytes=Ve,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=De(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=De(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=De(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return Ne(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,r,i;return Ge(this,void 0,void 0,(function(){var o,a,s,c,u,f,l,d;return Ne(this,(function(h){switch(h.label){case 0:o=!1,h.label=1;case 1:h.trys.push([1,6,7,12]),t=Fe(e),h.label=2;case 2:return[4,t.next()];case 3:if((n=h.sent()).done)return[3,5];if(s=n.value,o)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{a=this.doDecodeSync(),o=!0}catch(e){if(!(e instanceof qe))throw e}this.totalPos+=this.pos,h.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=h.sent(),r={error:c},[3,12];case 7:return h.trys.push([7,,10,11]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,9];case 8:h.sent(),h.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(o){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,a]}throw f=(u=this).headByte,l=u.pos,d=u.totalPos,new RangeError("Insufficient data in parsing ".concat(je(f)," at ").concat(d," (").concat(l," in the current buffer)"))}}))}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return Ke(this,arguments,(function(){var n,r,i,o,a,s,c,u,f;return Ne(this,(function(l){switch(l.label){case 0:n=t,r=-1,l.label=1;case 1:l.trys.push([1,13,14,19]),i=Fe(e),l.label=2;case 2:return[4,We(i.next())];case 3:if((o=l.sent()).done)return[3,12];if(a=o.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(r=this.readArraySize(),n=!1,this.complete()),l.label=4;case 4:l.trys.push([4,9,,10]),l.label=5;case 5:return[4,We(this.doDecodeSync())];case 6:return[4,l.sent()];case 7:return l.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((s=l.sent())instanceof qe))throw s;return[3,10];case 10:this.totalPos+=this.pos,l.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=l.sent(),u={error:c},[3,19];case 14:return l.trys.push([14,,17,18]),o&&!o.done&&(f=i.return)?[4,We(f.call(i))]:[3,16];case 15:l.sent(),l.label=16;case 16:return[3,18];case 17:if(u)throw u.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),n=void 0;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){if(0!==(i=e-128)){this.pushMapState(i),this.complete();continue e}n={}}else if(e<160){if(0!==(i=e-144)){this.pushArrayState(i),this.complete();continue e}n=[]}else{var r=e-160;n=this.decodeUtf8String(r,0)}else if(192===e)n=null;else if(193===e)n=void 0;else if(194===e)n=!1;else if(195===e)n=!0;else if(202===e)n=this.readF32();else if(203===e)n=this.readF64();else if(204===e)n=this.readU8();else if(205===e)n=this.readU16();else if(206===e)n=this.readU32();else if(207===e)n=this.readU64();else if(208===e)n=this.readI8();else if(209===e)n=this.readI16();else if(210===e)n=this.readI32();else if(211===e)n=this.readI64();else if(217===e){r=this.lookU8();n=this.decodeUtf8String(r,1)}else if(218===e){r=this.lookU16();n=this.decodeUtf8String(r,2)}else if(219===e){r=this.lookU32();n=this.decodeUtf8String(r,4)}else if(220===e){if(0!==(i=this.readU16())){this.pushArrayState(i),this.complete();continue e}n=[]}else if(221===e){if(0!==(i=this.readU32())){this.pushArrayState(i),this.complete();continue e}n=[]}else if(222===e){if(0!==(i=this.readU16())){this.pushMapState(i),this.complete();continue e}n={}}else if(223===e){if(0!==(i=this.readU32())){this.pushMapState(i),this.complete();continue e}n={}}else if(196===e){var i=this.lookU8();n=this.decodeBinary(i,1)}else if(197===e){i=this.lookU16();n=this.decodeBinary(i,2)}else if(198===e){i=this.lookU32();n=this.decodeBinary(i,4)}else if(212===e)n=this.decodeExtension(1,0);else if(213===e)n=this.decodeExtension(2,0);else if(214===e)n=this.decodeExtension(4,0);else if(215===e)n=this.decodeExtension(8,0);else if(216===e)n=this.decodeExtension(16,0);else if(199===e){i=this.lookU8();n=this.decodeExtension(i,1)}else if(200===e){i=this.lookU16();n=this.decodeExtension(i,2)}else{if(201!==e)throw new Re("Unrecognized type byte: ".concat(je(e)));i=this.lookU32();n=this.decodeExtension(i,4)}this.complete();for(var o=this.stack;o.length>0;){var a=o[o.length-1];if(0===a.type){if(a.array[a.position]=n,a.position++,a.position!==a.size)continue e;o.pop(),n=a.array}else{if(1===a.type){if(s=void 0,"string"!==(s=t(n))&&"number"!==s)throw new Re("The type of key must be string or number but "+t(n));if("__proto__"===n)throw new Re("The key __proto__ is not allowed");a.key=n,a.type=2;continue e}if(a.map[a.key]=n,a.readCount++,a.readCount!==a.size){a.key=null,a.type=1;continue e}o.pop(),n=a.map}}return n}var s},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new Re("Unrecognized array type byte: ".concat(je(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new Re("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new Re("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new Re("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw Ye;var r,i=this.pos+t;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,i,e):e>Oe?function(e,t,n){var r=e.subarray(t,t+n);return Ie.decode(r)}(this.bytes,i,e):Ae(this.bytes,i,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new Re("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw Ye;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new Re("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=be(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}(),Je={};var $e,Ze,et="undefined"!=typeof window||"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},tt={exports:{}};function nt(e,t){var n,r;return void 0===t&&(t={}),it(function(e,t){return void 0===t&&(t=ke),new Be(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat).encodeSharedRef(e)}(e,{maxDepth:null!==(n=t.maxDepth)&&void 0!==n?n:10,sortKeys:null===(r=t.sortKeys)||void 0===r||r}))}function rt(e){return t=at(e),void 0===n&&(n=Je),new Qe(n.extensionCodec,n.context,n.maxStrLength,n.maxBinLength,n.maxArrayLength,n.maxMapLength,n.maxExtLength).decode(t);var t,n}$e=tt,Ze=tt.exports,function(e){var n=Ze,r=$e&&$e.exports==n&&$e,i="object"==t(et)&&et;i.global!==i&&i.window!==i||(e=i);var o=function(e){this.message=e};(o.prototype=new Error).name="InvalidCharacterError";var a=function(e){throw new o(e)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,u={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,o=e.length%3,c="",u=-1,f=e.length-o;++u<f;)t=e.charCodeAt(u)<<16,n=e.charCodeAt(++u)<<8,r=e.charCodeAt(++u),c+=s.charAt((i=t+n+r)>>18&63)+s.charAt(i>>12&63)+s.charAt(i>>6&63)+s.charAt(63&i);return 2==o?(t=e.charCodeAt(u)<<8,n=e.charCodeAt(++u),c+=s.charAt((i=t+n)>>10)+s.charAt(i>>4&63)+s.charAt(i<<2&63)+"="):1==o&&(i=e.charCodeAt(u),c+=s.charAt(i>>2)+s.charAt(i<<4&63)+"=="),c},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",u=-1;++u<t;)r=s.indexOf(e.charAt(u)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"1.0.0"};if(n&&!n.nodeType)if(r)r.exports=u;else for(var f in u)u.hasOwnProperty(f)&&(n[f]=u[f]);else e.base64=u}(et);var it=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(String.fromCharCode(e[n]));return tt.exports.encode(t.join(""))},ot=function(e){return e.charCodeAt(0)},at=function(e){return Uint8Array.from(tt.exports.decode(e),ot)},st="RUNE_MSG_V2;";function ct(e){return"".concat(st).concat(nt(e))}function ut(e,t){return function(e){return"string"==typeof e&&e.startsWith(st)}(e)&&function(e){return rt(e.slice(st.length))}(e)[t]||null}function ft(e){e&&!d.enabled&&(d.enabled=!0,function(){var e,t;try{for(var n=c(Array.from(b)),r=n.next();!r.done;r=n.next())r.value.gain.value=0}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}(),function(){var e,t,n;try{for(var r=c(Array.from(v)),i=r.next();!i.done;i=r.next()){var o=i.value;null===(n=null==p?void 0:p.set)||void 0===n||n.call(o,!0)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}()),!e&&d.enabled&&(d.enabled=!1,function(){var e,t;try{for(var n=c(Array.from(b)),r=n.next();!r.done;r=n.next())r.value.gain.value=1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}(),function(){var e,t,n,r;try{for(var i=c(Array.from(h.keys())),o=i.next();!o.done;o=i.next()){var a=o.value;null===(n=null==p?void 0:p.set)||void 0===n||n.call(a,null!==(r=h.get(a))&&void 0!==r&&r)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}}())}function lt(e){return ct({runeGameEvent:e})}function dt(e){return function(t){var n=ut(t.data,"runeGameCommand");if(n&&"setForceMuteStatus"===n.type)return ft(n.muted);if(n)return e({clientToGame:n});var r=function(e){return ut(e,"serverToGame")}(t.data);return r?e({serverToGame:r}):void 0}}var ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",pt=ht.length;function vt(e){void 0===e&&(e=12);for(var t="",n=0;n<e;n++)t+=ht.charAt(Math.floor(Math.random()*pt));return t}function yt(e){for(var t=0,n=1779033703^e.length;t<e.length;t++)n=(n=Math.imul(n^e.charCodeAt(t),3432918353))<<13|n>>>19;return n=Math.imul(n^n>>>16,2246822507),n=Math.imul(n^n>>>13,3266489909),(n^=n>>>16)>>>0}function gt(e){!function(e,t){if(!e)throw t instanceof Error?t:new Error(null!=t?t:"Assertion failed")}(null!==e&&"object"==typeof e);return{gameState:e,stringifiedGameState:nt(e,{sortKeys:!0})}}function mt(e){return yt(gt(e).stringifiedGameState)}function wt(e){for(var t=_t(this,e),n=0;n<this.length;n++)this[n]=t[n];return this}function bt(e,t){var n=e-t;return isNaN(n)?0:n}function _t(e,t){if(void 0===t&&(t=bt),e.length<=1)return e;var n=Math.floor(e.length/2),r=e.slice(0,n),i=e.slice(n);return function(e,t,n){var r=[];for(;e.length&&t.length;)n(e[0],t[0])<=0?r.push(e.shift()):r.push(t.shift());return r.concat(e,t)}(_t(r,t),_t(i,t),t)}function St(e,t,n,r){void 0===r&&(r=window);var i="Rune"in r&&r.Rune;r.Rune=t;var o,a=r.Math.random;r.Math.random=(o=e,function(){var e=o+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296});var s=r.Array.prototype.sort;r.Array.prototype.sort=wt;try{return n()}finally{i?r.Rune=i:delete r.Rune,r.Math.random=a,r.Array.prototype.sort=s}}var Ut="RUNE_INVALID_ACTION";function Et(e){return function(e){return"object"==typeof e&&null!==e&&"name"in e}(e)&&e.name===Ut}function xt(e,t,n){return void 0===n&&(n=""),yt("".concat(n?n+"-":"").concat(e,"-").concat(t))}function At(e,t){return Math.floor(e/t)}function It(e,t){return Math.floor(e*t/1e3)}function Ot(){return Math.floor(performance.now())}function Ct(e,t,n){return n*t-e}function Tt(e){return F(e,!0)}var Mt=1e3;var Rt=[];function Pt(){var e,t,n=null!==(e=document.getElementById(Ft("container")))&&void 0!==e?e:document.createElement("div");n.id=Ft("container"),document.body.appendChild(n);var r=null!==(t=document.getElementById(Ft("style")))&&void 0!==t?t:document.createElement("style");r.id=Ft("style"),document.head.appendChild(r),r.innerHTML=Dt(kt||(kt=l(["\n    #"," {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      z-index: 2147483647;\n      background-color: black;\n      opacity: 0.9;\n      color: #f44336;\n      font-family: sans-serif;\n      font-size: ",";\n      line-height: 1.5;\n      padding: ",";\n    }\n\n    #"," a {\n      color: #fcc4c0;\n    }\n\n    #"," a:hover {\n      color: white;\n    }\n\n    #"," pre {\n      font-family: monospace;\n      margin: 0;\n      color: #fcc4c0;\n      background-color: #222;\n      display: inline-block;\n      padding: "," ",";\n      border-radius: ",";\n    }\n\n    .",":not(:first-child) {\n      padding-top: ",";\n    }\n\n    ."," ."," {\n      font-size: ",";\n      padding: "," 0;\n    }\n\n    ."," ."," > div:not(:first-child) {\n      padding-top: ",";\n    }\n\n    ."," {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n  "],["\n    #"," {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      z-index: 2147483647;\n      background-color: black;\n      opacity: 0.9;\n      color: #f44336;\n      font-family: sans-serif;\n      font-size: ",";\n      line-height: 1.5;\n      padding: ",";\n    }\n\n    #"," a {\n      color: #fcc4c0;\n    }\n\n    #"," a:hover {\n      color: white;\n    }\n\n    #"," pre {\n      font-family: monospace;\n      margin: 0;\n      color: #fcc4c0;\n      background-color: #222;\n      display: inline-block;\n      padding: "," ",";\n      border-radius: ",";\n    }\n\n    .",":not(:first-child) {\n      padding-top: ",";\n    }\n\n    ."," ."," {\n      font-size: ",";\n      padding: "," 0;\n    }\n\n    ."," ."," > div:not(:first-child) {\n      padding-top: ",";\n    }\n\n    ."," {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n  "])),Ft("container"),Lt(1),Lt(2.5),Ft("container"),Ft("container"),Ft("container"),Lt(.2),Lt(.4),Lt(.4),Ft("error"),Lt(2),Ft("error"),Ft("header"),Lt(1.5),Lt(.5),Ft("error"),Ft("body"),Lt(.4),Ft("errorsContainer")),n.innerHTML=Bt(zt||(zt=l(['\n    <div class="','">\n      ',"\n    </div>\n  "],['\n    <div class="','">\n      ',"\n    </div>\n  "])),Ft("errorsContainer"),Rt.map((function(e){return Bt(jt||(jt=l(['<div class="','">\n            <div class="','">','</div>\n            <div class="','">',"</div>\n          </div>"],['<div class="','">\n            <div class="','">','</div>\n            <div class="','">',"</div>\n          </div>"])),Ft("error"),Ft("header"),e.header,Ft("body"),e.body)})).join(""))}function Lt(e){return"min(".concat(30*e,"pt, ").concat(2*e,"vh)")}var Dt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.reduce((function(e,n,r){return e+n+(t[r]||"")}),"")},Bt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.reduce((function(e,n,r){return e+n+(t[r]||"")}),"")};var kt,jt,zt,Gt,Nt={};function Ft(e){return Nt[e]||(Nt[e]="_".concat(Math.round(1e9*Math.random()))),Nt[e]}function Wt(e,t){if(void 0===t&&(t=!1),!window.ReactNativeWebView)return window.parent!==window||t?void window.parent.postMessage(e,"*"):(console.error("Games using the Rune SDK must be tested using Rune CLI. See https://github.com/rune/rune-games-cli for instructions."),void function(e,t){(void 0===t?{}:t).replaceLinks&&(e.body=e.body.replace(/(https?:\/\/\S+)/gi,'<a target="_blank" href="$1">$1</a>')),Rt.find((function(t){return t.header===e.header&&t.body===e.body}))||Rt.push(e),setTimeout(Pt,0)}({header:"⚠ You need to use the Rune CLI to test your game",body:Bt(Gt||(Gt=l(["\n          <div>\n            Games using the Rune SDK must be tested using the Rune CLI. The CLI\n            simulates running your game inside the Rune app and provides\n            debugging tools. You can install and run the CLI by running these\n            commands in your terminal:\n          </div>\n          <div>\n            <pre>\n","</pre\n            >\n          </div>\n          <div>See https://github.com/rune/rune-games-cli for more info.</div>\n        "],["\n          <div>\n            Games using the Rune SDK must be tested using the Rune CLI. The CLI\n            simulates running your game inside the Rune app and provides\n            debugging tools. You can install and run the CLI by running these\n            commands in your terminal:\n          </div>\n          <div>\n            <pre>\n","</pre\n            >\n          </div>\n          <div>See https://github.com/rune/rune-games-cli for more info.</div>\n        "])),"npm install -g rune-games-cli\ncd yourGameFolder\nrune start")},{replaceLinks:!0}));window.ReactNativeWebView.postMessage(e)}var Kt=E().useDocumentForPostMsgs;function Ht(e){Wt(lt(e))}var Vt,qt=function(e,t){var n,r,i,o,a,c,l,d,h,p={},v=0,y=0,g="LOADING",m={},w={},b=[],_={},S="none",U=!1,E=0,x=null,A=!1,I=[],O=null,C=null,T=null,M=0,R=function(){return T+Ot()-C},P=function(e,t){var n=S;S=e;var r=t();return S=n,r},L=function(e){var t=e.oldGame,r=e.newGame,i=e.action,o=e.event,s=e.rollbacks;P("onChange",(function(){var e={oldGame:t,newGame:r,yourPlayerId:a,players:_,rollbacks:s.map((function(e){return{action:e.action,params:e.params,playerId:e.playerId}}))};i&&(e.action={action:i.action,params:i.params,playerId:i.playerId}),o&&("playerLeft"===o.event||"playerJoined"===o.event?e.event={event:o.event,params:{playerId:o.params.playerId}}:e.event={event:o.event}),n(e)}))},D=function(n,r){if("ERR"!==g){g="ERR";var i=r&&"[Immer] Immer forbids circular references"===r.message?new Error("Circular reference detected"):r;i?t.error(i,n):t.error(n),e.sendMsg(lt({type:"ERR",errMsg:[n,null==i?void 0:i.message].filter((function(e){return!!e})).join(". ")}))}},B=function(n,r){if("onChange"===S)return D("Action ".concat(n," called while onChange was executing. This is not allowed since this would lead to an infinite loop."));if("LOADING"!==g)if("DISCONNECTED"!==g)if(U||h.gameOver)t.warn("Game is in game over state, your game should prevent sending additional actions");else if(a){if(void 0===c||void 0===l)return D("Action dispatched without player seed or action count being defined");var i=function(e){var t=4===e.length?e.slice(1,4):e;return t.push(performance.now()),{actionTimestamps:t,limitReached:4===t.length&&t[t.length-1]-t[0]<1e3}}(I);i.limitReached?t.warn("Action limit of ".concat(3," per second reached! Ignoring the action.")):P("optimisticClient",(function(){I=i.actionTimestamps;var o=vt();l++;var s=xt(c,l);Tt(r);var u=void 0;try{St(s,q,(function(){return u=pe(m,(function(e){p[n](r,{game:e,playerId:a})}))})),gt(u)}catch(e){return Et(e)?void t.warn("Rune.invalidAction() was called inside ".concat(n)):D("Executing action ".concat(n," failed"),e)}var f={action:n,params:r,uuid:o,playerId:a,actionCount:l,randomSeed:s,sessionId:h.sessionId,clientGameTime:R()};b.push(f),L({oldGame:m,newGame:u,action:f,rollbacks:[]}),m=u;var d=ct({gameToServer:f});if(!function(e){return 2*e.length<1048576}(d))return D("Message sent to the server is too big.");e.sendMsg(d)}))}else t.warn("Spectators are not able to do actions.");else t.warn("Unable to process actions while the client is disconnected");else t.warn("Actions cannot be called while the game is not ready")},k=function(e,n){var r=m;if(w=n,v=e.updateCount,y=Math.max(v,y,At(R(),Mt)),i&&y>v){var a=N(w,v+1,y);if(!a)return;m=a}else m=w;var s=[],c=b.length>0&&At(b[0].clientGameTime,Mt)!==At(e.serverGameTime,Mt),u="action"in e&&b.length>0&&b[0].uuid===e.uuid,f=m;if(b=b.filter((function(n){if(n.uuid===e.uuid)return!1;if(U||h.gameOver)return s.push(n),!1;try{St(n.randomSeed,q,(function(){f=pe(f,(function(e){p[n.action](n.params,{game:e,playerId:n.playerId})}))})),gt(f)}catch(e){return Et(e)?(t.warn("Action ".concat(n.action," in client queue called Rune.invalidMessage after network message, removing it from the queue")),s.push(n),!1):D("Executing action ".concat(n.action," in queue failed"),e)}return!0})),m=f,o||!i||U||h.gameOver||G(),!("event"in e)||"playerJoined"!==e.event&&"playerLeft"!==e.event){var l="event"in e&&"gameTimeUpdate"===e.event,d=(l||u)&&c,g=!1;if(d||l)g=gt(r).stringifiedGameState!==gt(m).stringifiedGameState;if(d&&(g||s.length>0))L({oldGame:r,newGame:m,rollbacks:s,event:{event:"timeSync"}});else if(l&&g)L({oldGame:r,newGame:m,rollbacks:[],event:{event:"update"}});else if(l);else if("action"in e){if(u)return;L({oldGame:r,newGame:m,rollbacks:s,action:e})}else D("Unhandled scenario after updating receiving server message")}else L({oldGame:r,newGame:m,rollbacks:s,event:e})},j=function(e){return e===++E||(D("Order number mismatch detected. Expected number ".concat(E,", received ").concat(e)),!1)},z=function(e){P("optimisticClient",(function(){if(!i)return D("Executing update loop failed. Missing update function");if(y>=e)o=setTimeout(z,Ct(R(),y+1,Mt),y+1);else{if("READY"!==g||U||h.gameOver)return clearTimeout(o),void(o=void 0);var t=At(R(),Mt),n=N(m,e,t);if(n){if(n!==m&&(L({oldGame:m,newGame:n,event:{event:"update"},rollbacks:[]}),m=n),y=t,R()-y*Mt<0)return D("client update loop is running faster than gameTime");o=setTimeout(z,Ct(R(),t+1,Mt),t+1)}}}))},G=function(){o=setTimeout(z,Ct(R(),y+1,Mt),y+1)},N=function(e,t,n){return P("applyUpdates",(function(){for(var r=e,o=t;o<=n;o++){if(U||h.gameOver)return r;M=o;var a=xt(d,o,"update-");try{St(a,q,(function(){return r=pe(r,(function(e){i({game:e})}))})),gt(r)}catch(e){return D("Executing update failed",e)}}return r}))},F=function(t){if("stateSync"!==t.event){if(t.params.gameContext.sessionId!==h.sessionId)return D("Received event for incorrect game session.");if("gameTimeUpdate"!==t.event){if(j(t.orderNumber)&&(h=t.params.gameContext,"playerJoined"===t.event||"playerLeft"===t.event)){var n=t.params;_=Tt(n.players);var u=null==r?void 0:r[t.event];if(h.gameOver)return void("gameEnded"===h.gameOver.reason?q.gameOver(h.gameOver.options):q.gameOver());if(!u)return void L({oldGame:m,newGame:m,rollbacks:[],event:t});var f=i?N(w,v+1,t.updateCount):w;if(!f)return;try{St(n.randomSeed,q,(function(){f=pe(f,(function(e){return u(n.playerId,{game:e})}))}));var p=mt(f);if(t.params.stateHash&&p!==t.params.stateHash)return D("State desync detected.")}catch(e){return D("Processing ".concat(t.event," failed"),e)}k(t,f)}}else{if(y===t.updateCount&&0===b.length)return w=pe(m,(function(){})),void(v=t.updateCount);var S=N(w,v+1,t.updateCount);if(!S)return;k(t,S)}}else{o&&(clearTimeout(o),o=void 0),h=t.params.gameContext,C=Ot(),T=t.serverGameTime,g="READY";var U=t.params;if(x||(x=U.gameContext.gameId),x!==U.gameContext.gameId)return D("State sync received for incorrect gameId. Running game: ".concat(x,", received for game: ").concat(U.gameContext.gameId));if(w=Tt(U.game),m=Tt(U.game),_=Tt(U.players),c=U.yourPlayerSeed,d=U.serverSeed,l=U.yourPlayerActionCount,a=U.yourPlayerId,b=[],E=t.orderNumber,v=t.updateCount,y=v,L({oldGame:U.game,newGame:U.game,rollbacks:[],event:t}),e.sendMsg(lt({type:"ON_CHANGE"})),h.gameOver&&("gameEnded"===h.gameOver.reason?q.gameOver(h.gameOver.options&&s(s({},h.gameOver.options),{delayPopUp:!1})):q.gameOver()),i){var A=At(T,Mt);v!==A?o=setTimeout(z,0,A):G()}}},W=function(e){if(Tt(e),j(e.orderNumber)){if(e.sessionId!==h.sessionId)return D("Received action for incorrect game session.");var t=i?N(w,v+1,e.updateCount):w;if(t){try{St(e.randomSeed,q,(function(){return t=pe(t,(function(t){p[e.action](e.params,{game:t,playerId:e.playerId})}))}));var n=mt(t);if(e.stateHash&&n!==e.stateHash)return D("State desync detected.")}catch(t){return Et(t)?D("Action ".concat(e.action," coming through network called Rune.invalidAction()")):D("Executing action ".concat(e.action," coming from server failed"),t)}k(e,t)}}},K=function(e){var t=new Map;return{asyncMethod:function(n,r,i){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=vt();return e.sendMsg(lt(n.apply(void 0,f([s],u(o),!1)))),new Promise((function(e,n){t.set(s,{resolve:e,reject:n})})).then((function(e){if(e.type!==r)throw new Error("Unexpected response message");return i(e)}))}},handleAsyncMethodRes:function(e){var n=t.get(e.reqId);if(!n)throw new Error("Deferred response not found");n.resolve(e)}}}(e),H=K.asyncMethod,V=K.handleAsyncMethodRes,q={version:"4.10.2",actions:{},gameOver:function(t){var n,r,i;"none"!==S&&"onChange"!==S?(U=!0,"serverMsg"===S&&e.sendMsg(lt({type:"GAME_OVER",context:{reason:(null===(n=h.gameOver)||void 0===n?void 0:n.reason)||"gameEnded",options:t,players:null!==(i=null===(r=h.gameOver)||void 0===r?void 0:r.players)&&void 0!==i?i:_}}))):D("Rune.gameOver() can't be called outside of logic.js")},initClient:function(t){return A?D("Rune.initClient must be called only once."):t&&"object"==typeof t?"onChange"in t||"visualUpdate"in t?"onChange"in t&&"function"!=typeof t.onChange||"visualUpdate"in t&&"function"!=typeof t.visualUpdate?D("onChange must be a function"):(A=!0,n="onChange"in t?t.onChange:t.visualUpdate,e.sendMsg(lt({type:"INIT",version:q.version})),void e.onMsg((function(e){"clientToGame"in e?"DISCONNECTED"===e.clientToGame.type?g="DISCONNECTED":"reqId"in e.clientToGame&&V(e.clientToGame):P("serverMsg",(function(){var t;U=!1,t=e.serverToGame,O=t.serverGameTime,"event"in t?F(t):W(t)}))}))):D("onChange must be provided for Rune.initClient"):D("you must provide parameters to Rune.initClient")},initLogic:function(e){var t=e.actions,n=e.events,o=e.update;p=t,r=n,q.actions=Object.keys(t).reduce((function(e,t){return e[t]=function(e){return B(t,e)},e}),{}),o&&(i=o)},invalidAction:function(){return(e=new Error("Rune.invalidAction() was called")).name=Ut,e;var e},openExternalApp:function(t){e.sendMsg(lt({type:"OPEN_EXTERNAL_APP",url:t}))},clipboardWrite:H((function(e,t){return{type:"CLIPBOARD_WRITE_REQ",reqId:e,text:t}}),"CLIPBOARD_WRITE_RES",(function(e){return{success:e.success}})),clipboardRead:H((function(e){return{type:"CLIPBOARD_READ_REQ",reqId:e}}),"CLIPBOARD_READ_RES",(function(e){return{text:e.text}})),storageWrite:H((function(e,t,n){return{type:"STORAGE_WRITE_REQ",reqId:e,key:t,value:n}}),"STORAGE_WRITE_RES",(function(e){return{success:e.success}})),storageRead:H((function(e,t){return{type:"STORAGE_READ_REQ",reqId:e,key:t}}),"STORAGE_READ_RES",(function(e){return{value:e.value}})),showGameOverPopUp:function(){e.sendMsg(lt({type:"SHOW_GAME_OVER_POP_UP"}))},showInvitePlayers:function(){e.sendMsg(lt({type:"SHOW_INVITE_SHEET"}))},gameTimeInSeconds:function(){return"none"===S||"onChange"===S?(D("Rune.gameTimeInSeconds() can't be called outside of logic.js"),0):It("applyUpdates"===S?M:At("serverMsg"===S?O:R(),Mt),Mt)}};return q}({sendMsg:Wt,onMsg:function(e){var t,n;t=Kt,n=dt(e),t?document.addEventListener("message",n):window.addEventListener("message",n)}},window.ReactNativeWebView?(Vt=Ht,{info:function(){},warn:function(e,t){Vt(t?{type:"WARNING",msg:t,data:e,gamePlayUuid:""}:{type:"WARNING",msg:e.toString(),gamePlayUuid:""})},error:function(){}}):console),Yt=E();return function(e){var t,n=e.enableInitialOverlayInBrowser,r=e.startMuted,i=e.sendMsg;!function(e){window.addEventListener("error",(function(t){return e({type:"WINDOW_ERR",err:{msg:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno}}),!0}));var t=window.alert;window.alert=function(n){e({type:"WINDOW_ALERT",message:n}),t(n)}}(i),1!==document.getElementsByTagName("script").length&&console.warn("%c⚠ Other scripts are imported before the Rune SDK script. Update your index.html file so that the Rune SDK script tag is included before any other scripts. It is also possible that this warning is caused by a script injected by a browser extension or an antivirus program. In that case, you can safely ignore this.","font-size: 16px"),window.localStorage&&window.localStorage.clear(),window.sessionStorage&&window.sessionStorage.clear(),window.ReactNativeWebView&&(window.console.log=function(){},window.console.error=function(){},window.console.warn=function(){}),function(e,t){e&&document.addEventListener("DOMContentLoaded",(function(){var e=document.createElement("div");e.setAttribute("style","top: 0; bottom: 0; left: 0; right: 0; width: 100vw; height: 100vh; position: absolute; z-index: 9999;"),e.addEventListener("click",(function(){e.remove(),t({type:"BROWSER_INITIAL_OVERLAY_CLICKED"})})),document.body.appendChild(e),t({type:"BROWSER_IFRAME_LOADED"})}))}(n,i),U(r),(t=document.createElement("style")).innerHTML="\n    * {\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n    }\n    input {\n      user-select: auto;\n      -webkit-user-select: auto;\n      -moz-user-select: auto;\n      -ms-user-select: auto;\n    }\n  ",document.head.prepend(t)}({enableInitialOverlayInBrowser:Yt.enableInitialOverlayInBrowser,startMuted:Yt.startMuted,sendMsg:Ht}),qt}();
